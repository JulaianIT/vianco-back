<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tareas</title>
</head>
<body>
    <h1>Tareas para el turno de {{nombre}}</h1>
    <h2>Turno: {{turno}}</h2>

    <form action="/marcar-tarea" method="post">
        <label for="fecha">POR FAVOR SELECCIONE LA FECHA</label>
        <input type="date" name="fecha">
        <br>
        <label for="turno">turno seleccionado</label>
        <input type="text" name="turno" value="{{turno}}" >
        <br>
        
        <!-- Tarea: Recepciones Aeropuerto -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="recepciones">CUADRO DE RECEPCIONES DE AEROPUERTO:</label>
            <div>
                <input type="checkbox" id="recepciones_realizado" name="recepciones_realizado" value="realizado">
                <label for="recepciones_realizado">Realizado</label>
                <input type="checkbox" id="recepciones_no_aplica" name="recepciones_no_aplica" value="no_aplica">
                <label for="recepciones_no_aplica">No Aplica</label>
                <input type="checkbox" id="recepciones_no_realizado" name="recepciones_no_realizado" value="no_realizado">
                <label for="recepciones_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Reporte de novedades -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="reporte_novedades">LLEGADAS EJECUTIVOS:</label>
            <div>
                <input type="checkbox" id="reporte_novedades_realizado" name="reporte_novedades_realizado" value="realizado">
                <label for="llegadas_ejecutivos_realizado">Realizado</label>
                <input type="checkbox" id="llegadas_ejecutivos_no_aplica" name="llegadas_ejecutivos_no_aplica" value="no_aplica">
                <label for="llegadas_ejecutivos_no_aplica">No Aplica</label>
                <input type="checkbox" id="llegadas_ejecutivos_no_realizado" name="llegadas_ejecutivos_no_realizado" value="no_realizado">
                <label for="llegadas_ejecutivos_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Repite el mismo patrón para las demás tareas -->
        <!-- Tarea: Información de pagos -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="info_pagos">INFORMACION DE PAGOS O REQUERIMIENTOS:</label>
            <div>
                <input type="checkbox" id="info_pagos_realizado" name="info_pagos_realizado" value="realizado">
                <label for="info_pagos_realizado">Realizado</label>
                <input type="checkbox" id="info_pagos_no_aplica" name="info_pagos_no_aplica" value="no_aplica">
                <label for="info_pagos_no_aplica">No Aplica</label>
                <input type="checkbox" id="info_pagos_no_realizado" name="info_pagos_no_realizado" value="no_realizado">
                <label for="info_pagos_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Revisión de servicios en efectivo -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="revision_servicios">REVICION DE SERVICIOS EN EFECTIVO:</label>
            <div>
                <input type="checkbox" id="revision_servicios_realizado" name="revision_servicios_realizado" value="realizado">
                <label for="revision_servicios_realizado">Realizado</label>
                <input type="checkbox" id="revision_servicios_no_aplica" name="revision_servicios_no_aplica" value="no_aplica">
                <label for="revision_servicios_no_aplica">No Aplica</label>
                <input type="checkbox" id="revision_servicios_no_realizado" name="revision_servicios_no_realizado" value="no_realizado">
                <label for="revision_servicios_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Coordinación de tareas de TaskGo -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="coordinacion_tareas">COORDINACION DE TAREAS DE TASKGO</label>
            <div>
                <input type="checkbox" id="coordinacion_tareas_realizado" name="coordinacion_tareas_realizado" value="realizado">
                <label for="coordinacion_tareas_realizado">Realizado</label>
                <input type="checkbox" id="coordinacion_tareas_no_aplica" name="coordinacion_tareas_no_aplica" value="no_aplica">
                <label for="coordinacion_tareas_no_aplica">No Aplica</label>
                <input type="checkbox" id="coordinacion_tareas_no_realizado" name="coordinacion_tareas_no_realizado" value="no_realizado">
                <label for="coordinacion_tareas_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
    
        
        <!-- Tarea: Despacho de facturación -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="despacho_facturacion">DESPACHO DE FACTURACION</label>
            <div>
                <input type="checkbox" id="despacho_facturacion_realizado" name="despacho_facturacion_realizado" value="realizado">
                <label for="despacho_facturacion_realizado">Realizado</label>
                <input type="checkbox" id="despacho_facturacion_no_aplica" name="despacho_facturacion_no_aplica" value="no_aplica">
                <label for="despacho_facturacion_no_aplica">No Aplica</label>
                <input type="checkbox" id="despacho_facturacion_no_realizado" name="despacho_facturacion_no_realizado" value="no_realizado">
                <label for="despacho_facturacion_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Entrega de documentos -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="entrega_documentos">ENTREGA DE DOCUMENTOS:</label>
            <div>
                <input type="checkbox" id="entrega_documentos_realizado" name="entrega_documentos_realizado" value="realizado">
                <label for="entrega_documentos_realizado">Realizado</label>
                <input type="checkbox" id="entrega_documentos_no_aplica" name="entrega_documentos_no_aplica" value="no_aplica">
                <label for="entrega_documentos_no_aplica">No Aplica</label>
                <input type="checkbox" id="entrega_documentos_no_realizado" name="entrega_documentos_no_realizado" value="no_realizado">
                <label for="entrega_documentos_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Limpieza del área -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="limpieza_area">LIMPIEZA DEL AREA:</label>
            <div>
                <input type="checkbox" id="limpieza_area_realizado" name="limpieza_area_realizado" value="realizado">
                <label for="limpieza_area_realizado">Realizado</label>
                <input type="checkbox" id="limpieza_area_no_aplica" name="limpieza_area_no_aplica" value="no_aplica">
                <label for="limpieza_area_no_aplica">No Aplica</label>
                <input type="checkbox" id="limpieza_area_no_realizado" name="limpieza_area_no_realizado" value="no_realizado">
                <label for="limpieza_area_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Cierre de operaciones -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="cierre_operaciones">CIERRE DE OPERACIONES:</label>
            <div>
                <input type="checkbox" id="cierre_operaciones_realizado" name="cierre_operaciones_realizado" value="realizado">
                <label for="cierre_operaciones_realizado">Realizado</label>
                <input type="checkbox" id="cierre_operaciones_no_aplica" name="cierre_operaciones_no_aplica" value="no_aplica">
                <label for="cierre_operaciones_no_aplica">No Aplica</label>
                <input type="checkbox" id="cierre_operaciones_no_realizado" name="cierre_operaciones_no_realizado" value="no_realizado">
                <label for="cierre_operaciones_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Reporte de actividades -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="reporte_actividades">REPORTE DE ACTIVIDADES:</label>
            <div>
                <input type="checkbox" id="reporte_actividades_realizado" name="reporte_actividades_realizado" value="realizado">
                <label for="reporte_actividades_realizado">Realizado</label>
                <input type="checkbox" id="reporte_actividades_no_aplica" name="reporte_actividades_no_aplica" value="no_aplica">
                <label for="reporte_actividades_no_aplica">No Aplica</label>
                <input type="checkbox" id="reporte_actividades_no_realizado" name="reporte_actividades_no_realizado" value="no_realizado">
                <label for="reporte_actividades_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Atención al cliente -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="atencion_cliente">ATENCION AL CLIENTE:</label>
            <div>
                <input type="checkbox" id="atencion_cliente_realizado" name="atencion_cliente_realizado" value="realizado">
                <label for="atencion_cliente_realizado">Realizado</label>
                <input type="checkbox" id="atencion_cliente_no_aplica" name="atencion_cliente_no_aplica" value="no_aplica">
                <label for="atencion_cliente_no_aplica">No Aplica</label>
                <input type="checkbox" id="atencion_cliente_no_realizado" name="atencion_cliente_no_realizado" value="no_realizado">
                <label for="atencion_cliente_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Coordinación de servicios -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="coordinacion_servicios">COORDINACION DE SERVICIOS:</label>
            <div>
                <input type="checkbox" id="coordinacion_servicios_realizado" name="coordinacion_servicios_realizado" value="realizado">
                <label for="coordinacion_servicios_realizado">Realizado</label>
                <input type="checkbox" id="coordinacion_servicios_no_aplica" name="coordinacion_servicios_no_aplica" value="no_aplica">
                <label for="coordinacion_servicios_no_aplica">No Aplica</label>
                <input type="checkbox" id="coordinacion_servicios_no_realizado" name="coordinacion_servicios_no_realizado" value="no_realizado">
                <label for="coordinacion_servicios_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Revisión de condiciones de vehículos -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="revision_vehiculos">REVICION DE CONDICIONES DE VEHICULOS:</label>
            <div>
                <input type="checkbox" id="revision_vehiculos_realizado" name="revision_vehiculos_realizado" value="realizado">
                <label for="revision_vehiculos_realizado">Realizado</label>
                <input type="checkbox" id="revision_vehiculos_no_aplica" name="revision_vehiculos_no_aplica" value="no_aplica">
                <label for="revision_vehiculos_no_aplica">No Aplica</label>
                <input type="checkbox" id="revision_vehiculos_no_realizado" name="revision_vehiculos_no_realizado" value="no_realizado">
                <label for="revision_vehiculos_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Comunicación con proveedores -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="comunicacion_proveedores">COMUNICACION CON PROVEEDORES:</label>
            <div>
                <input type="checkbox" id="comunicacion_proveedores_realizado" name="comunicacion_proveedores_realizado" value="realizado">
                <label for="comunicacion_proveedores_realizado">Realizado</label>
                <input type="checkbox" id="comunicacion_proveedores_no_aplica" name="comunicacion_proveedores_no_aplica" value="no_aplica">
                <label for="comunicacion_proveedores_no_aplica">No Aplica</label>
                <input type="checkbox" id="comunicacion_proveedores_no_realizado" name="comunicacion_proveedores_no_realizado" value="no_realizado">
                <label for="comunicacion_proveedores_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>
        
        <!-- Tarea: Otras actividades -->
        <div style="display: flex; justify-content: space-between;">
            <label style="text-align: left;" for="otras_actividades">OTRAS ACTIVIDADES:</label>
            <div>
                <input type="checkbox" id="otras_actividades_realizado" name="otras_actividades_realizado" value="realizado">
                <label for="otras_actividades_realizado">Realizado</label>
                <input type="checkbox" id="otras_actividades_no_aplica" name="otras_actividades_no_aplica" value="no_aplica">
                <label for="otras_actividades_no_aplica">No Aplica</label>
                <input type="checkbox" id="otras_actividades_no_realizado" name="otras_actividades_no_realizado" value="no_realizado">
                <label for="otras_actividades_no_realizado">No Realizado</label>
            </div>
        </div>
        <br>        <!-- Agregar firma -->
        <label for="firma"><strong>FIRMA DE {{nombre}}</strong></label><br>
        <canvas id="firmaCanvas" width="400" height="200" style="border:1px solid #000;"></canvas><br>
        <button type="button" onclick="limpiarFirma()">Limpiar Firma</button><br>
        <input type="hidden" id="firmaBase64" name="firmaBase64"><!-- Aquí se almacenará la firma en formato base64 -->
        
        <!-- Agregar campo oculto para el nombre -->
        
        <!-- Botón de enviar -->
        <button type="submit">Enviar</button>
    </form>
    <script>
   // Obtener el valor del turno seleccionado anteriormente
    
        var canvas = document.getElementById('firmaCanvas');
        var ctx = canvas.getContext('2d');

        // Variables para controlar el estado de la firma
        var firmaActiva = false;
        var lastX = 0;
        var lastY = 0;

        // Eventos de ratón para dibujar la firma
        canvas.addEventListener('mousedown', function(e) {
            firmaActiva = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });

        canvas.addEventListener('mousemove', function(e) {
            if (firmaActiva) {
                var currentX = e.offsetX;
                var currentY = e.offsetY;
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                [lastX, lastY] = [currentX, currentY];
            }
        });

        canvas.addEventListener('mouseup', function() {
            firmaActiva = false;
        });

        // Convertir la firma en base64 y almacenarla en el campo oculto
        function guardarFirma() {
            var firmaBase64 = canvas.toDataURL();
            console.log("Firma en formato base64:", firmaBase64);
            document.getElementById('firmaBase64').value = firmaBase64;
        }

        function limpiarFirma() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            document.getElementById('firmaBase64').value = '';
            console.log("Firma borrada");
        }
        canvas.addEventListener('touchstart', function(e) {
            firmaActiva = true;
            var touch = e.touches[0];
            [lastX, lastY] = [touch.clientX - canvas.offsetLeft, touch.clientY - canvas.offsetTop];
        });

        canvas.addEventListener('touchmove', function(e) {
            e.preventDefault(); // Evita el desplazamiento de la página en dispositivos táctiles
            if (firmaActiva) {
                var touch = e.touches[0];
                var currentX = touch.clientX - canvas.offsetLeft;
                var currentY = touch.clientY - canvas.offsetTop;
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                [lastX, lastY] = [currentX, currentY];
            }
        });

        canvas.addEventListener('touchend', function() {
            firmaActiva = false;
        });


    </script>
    
</body>
</html>

