<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Recepciones</title>
</head>
<body>
    <h1>Formulario de Recepciones</h1>
    <form action="/procesar_formulario" method="POST">
        <label for="cliente">Cliente Costo:</label>
        <input type="text" id="cliente" name="cliente" required><br><br>

              <label for="fecha">Fecha:</label>
        <input type="date" id="fecha" name="fecha" required><br><br>

             <label for="hora">Hora:</label>
        <input type="time" id="hora" name="hora" required><br><br>

         <label for="nombre_pasajero">Nombre del Pasajero:</label>
        <input type="text" id="nombre_pasajero" name="nombre_pasajero" required><br><br>

   
       
        <label for="valor">Valor:</label>
        <input type="number" id="valor" name="valor" required><br><br>

        <label for="cantidad_pasajeros">Cantidad de Pasajeros:</label>
        <input type="number" id="cantidad_pasajeros" name="cantidad_pasajeros" required><br><br>

        <label for="tipo_vehiculo">Tipo de Vehículo:</label>
        <select id="tipo_vehiculo" name="tipo_vehiculo" required>
            <option value="Automóvil">Automóvil</option>
            <option value="Camioneta">Camioneta</option>
            <option value="Van">Van</option>
        </select><br><br>

        <label for="vuelo">Vuelo:</label>
        <input type="text" id="vuelo" name="vuelo" required><br><br>

        <label for="placa">Placa:</label>
        <input type="text" id="placa" name="placa" required><br><br>

        <label for="conductor">Conductor:</label>
        <input type="text" id="conductor" name="conductor" required><br><br>

        <label for="celular_conductor">Celular del Conductor:</label>
        <input type="tel" id="celular_conductor" name="celular_conductor" required><br><br>
        <a href="/descargar_pdf">Descargar PDF</a>

        <input type="submit" value="Enviar">
    </form>
    <script>
document.getElementById('formulario').addEventListener('submit', async function(event) {
            event.preventDefault(); // Evita que el formulario se envíe de forma tradicional
            
            // Envía el formulario mediante una petición AJAX
            var formData = new FormData(this);
            try {
                const response = await fetch('/procesar_formulario', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    // Si la respuesta es exitosa, inicia la descarga del PDF automáticamente
                    window.location.href = '/descargar_pdf';
                    // Limpiar el formulario
                    this.reset();
                } else {
                    // Maneja cualquier error de respuesta del servidor
                    console.error('Error al procesar el formulario:', response.statusText);
                    alert('Ocurrió un error al procesar el formulario. Por favor, inténtalo de nuevo.');
                }
            } catch (error) {
                console.error('Error de red:', error);
                alert('Ocurrió un error de red. Por favor, verifica tu conexión e inténtalo de nuevo.');
            }
        });
    </script>

</body>
</html>
